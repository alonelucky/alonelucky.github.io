{
    "version": "https://jsonfeed.org/version/1",
    "title": "小码农博客 • All posts by \"前端\" tag",
    "description": null,
    "home_page_url": "http://qiubo.ink",
    "items": [
        {
            "id": "http://qiubo.ink/2024/11/16/%E5%88%A4%E6%96%AD%E9%A1%B5%E9%9D%A2%E5%86%85%E5%85%83%E7%B4%A0%E6%98%AF%E5%90%A6%E5%8F%AF%E8%A7%81/",
            "url": "http://qiubo.ink/2024/11/16/%E5%88%A4%E6%96%AD%E9%A1%B5%E9%9D%A2%E5%86%85%E5%85%83%E7%B4%A0%E6%98%AF%E5%90%A6%E5%8F%AF%E8%A7%81/",
            "title": "判断页面内元素是否可见",
            "date_published": "2024-11-16T07:46:42.000Z",
            "content_html": "<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 目前观测只支持非占位隐藏， dispaly:none; </span></span><br><span class=\"line\"><span class=\"comment\">// 占位隐藏可以通过 ele.style 去判断对应的 css</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">dom_visibility</span>(<span class=\"params\">ele</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!ele) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(ele.<span class=\"property\">checkVisibility</span>) <span class=\"keyword\">return</span> ele.<span class=\"title function_\">checkVisibility</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (ele.<span class=\"property\">offsetWidth</span> &gt; <span class=\"number\">0</span> || ele.<span class=\"property\">offsetHeight</span> &gt; <span class=\"number\">0</span>) || !!ele.<span class=\"property\">offsetParent</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n\n<p><code>var ele = document.getElementById(&#39;someId&#39;)</code></p>\n<ol>\n<li>判断网页中的Element元素是否可见<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ele.<span class=\"title function_\">checkVisibility</span>();</span><br></pre></td></tr></table></figure>\n此方法目前只有 谷歌 105 版本 和 Firefox 106版本 以后的浏览器支持，Safari全系不支持。</li>\n<li>判断 ele.offsetParent 是否为null。<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (d.<span class=\"property\">offsetParent</span> === <span class=\"literal\">null</span>) &#123; </span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27; the element currently is invisible&#x27;</span>); </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n原文链接：<a href=\"https://stackoverflow.com/questions/19669786/check-if-element-is-visible-in-dom\">https://stackoverflow.com/questions/19669786/check-if-element-is-visible-in-dom</a></li>\n<li>判断 offsetWidth 和 offsetHeight 同时等于0<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">isvisible</span>(<span class=\"params\">ele</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ele.<span class=\"property\">offsetWidth</span> &gt; <span class=\"number\">0</span> || ele.<span class=\"property\">offsetHeight</span> &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 目前观测只支持非占位隐藏， dispaly:none; </span></span><br><span class=\"line\"><span class=\"comment\">// 占位隐藏可以通过 ele.style 去判断对应的 css</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">dom_visibility</span>(<span class=\"params\">ele</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!ele) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(ele.<span class=\"property\">checkVisibility</span>) <span class=\"keyword\">return</span> ele.<span class=\"title function_\">checkVisibility</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (ele.<span class=\"property\">offsetWidth</span> &gt; <span class=\"number\">0</span> || ele.<span class=\"property\">offsetHeight</span> &gt; <span class=\"number\">0</span>) || !!ele.<span class=\"property\">offsetParent</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "前端"
            ]
        },
        {
            "id": "http://qiubo.ink/2016/12/08/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%9B%BE%E7%89%87/",
            "url": "http://qiubo.ink/2016/12/08/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%9B%BE%E7%89%87/",
            "title": "响应式图片",
            "date_published": "2016-12-08T19:18:03.000Z",
            "content_html": "<p>在当前响应式设计和自适应设计的流行下，大部分web页面往往都兼容多终端设备，其中一个比较麻烦的问题就是图片的加载了。不同平台显然不可能用同一张大的图片，这样子不但浪费手机流量、影响网站载入速度并且在小屏幕下会很不清晰。让浏览器根据分辨率自动识别图片是最好的方法。</p>\n<span id=\"more\"></span>\n<h3 id=\"方法一：\"><a href=\"#方法一：\" class=\"headerlink\" title=\"方法一：\"></a>方法一：</h3><h4 id=\"picture标签\"><a href=\"#picture标签\" class=\"headerlink\" title=\"picture标签\"></a>picture标签</h4><p>引用HTML5新特性</p>\n<ol>\n<li>创建标签</li>\n<li>在标签内使用source元素</li>\n<li>添加media属性</li>\n<li>srcset加载图片</li>\n<li>img元素避免老旧浏览器不识别picture标签和srcset属性<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">picture</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;img/300.png&quot;</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(min-width:300px)&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;img/600.png&quot;</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(min-width:600px)&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;img/1200.png&quot;</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(min-width:1200px)&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;img/1200.png&quot;</span>/&gt;</span>                </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">picture</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"方法二：\"><a href=\"#方法二：\" class=\"headerlink\" title=\"方法二：\"></a>方法二：</h3><h4 id=\"srcset属性\"><a href=\"#srcset属性\" class=\"headerlink\" title=\"srcset属性\"></a>srcset属性</h4><ol>\n<li><p>img标签的新属性</p>\n</li>\n<li><p>配合sizes属性使用更好</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;img/300.png 300w,</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">             img/600.png 600w,</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">             img/1200.png 1200w&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">     <span class=\"attr\">sizes</span>=<span class=\"string\">&quot;(max-width:300px) 100vm,</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">            (max-width:600px) 50vm,</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">            (max-width:1200) 300px&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>srcset中的300w、600w、1200w类似于媒体查询，规定了不同宽度下应该加载的图片。当图片外围的宽度不为视口宽度的100%时，该属性会出现一些小问题，所以需要与sizes属性相配合。 sizes属性的媒体查询规定的是视口大小与其缩放比例</p>\n<h3 id=\"方法三：\"><a href=\"#方法三：\" class=\"headerlink\" title=\"方法三：\"></a>方法三：</h3><p>js或cookie控制服务器 <a href=\"http://www.wzsky.net/html/Photo/theory/130077.html\">详细参考</a></p>\n</li>\n</ol>\n",
            "tags": [
                "前端",
                "响应式图片",
                "移动端兼容"
            ]
        }
    ]
}